!function(e,t,n){e.fn.jScrollPane=function(t){function i(t,i){function o(i){var r,c,p,u,d,j,g,v;if(I=i,F===n)g=t.scrollTop(),v=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),G=t.innerWidth()+vt,q=t.innerHeight(),t.width(G),F=e('<div class="jspPane" />').css("padding",gt).append(t.children()),V=e('<div class="jspContainer" />').css({width:G+"px",height:q+"px"}).append(F).appendTo(t);else{if(t.css("width",""),j=t.innerWidth()+vt!=G||t.outerHeight()!=q,j&&(G=t.innerWidth()+vt,q=t.innerHeight(),V.css({width:G+"px",height:q+"px"})),!j&&mt==E&&F.outerHeight()==O)return void t.width(G);mt=E,F.css("width",""),t.width(G),V.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}r=F.clone(!1,!1).css("position","absolute"),c=e('<div style="width:1px; position: relative;" />').append(r),e("body").append(c),E=Math.max(F.outerWidth(),r.outerWidth()),c.remove(),O=F.outerHeight(),N=E/G,K=O/q,Q=K>1,U=N>1,U||Q?(t.addClass("jspScrollable"),p=I.maintainPosition&&(Z||tt),p&&(u=B(),d=D()),s(),a(),l(),p&&(C(u,!1),y(d,!1)),A(),H(),L(),I.enableKeyboardNavigation&&W(),I.clickOnTrack&&f(),X(),I.hijackInternalLinks&&z()):(t.removeClass("jspScrollable"),F.css({top:0,width:V.width()-vt}),S(),x(),Y(),h(),M()),I.autoReinitialise&&!jt?jt=setInterval(function(){o(I)},I.autoReinitialiseDelay):!I.autoReinitialise&&jt&&clearInterval(jt),g&&t.scrollTop(0)&&y(g,!1),v&&t.scrollLeft(0)&&C(v,!1),t.trigger("jsp-initialised",[U||Q])}function s(){Q&&(V.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),nt=V.find(">.jspVerticalBar"),it=nt.find(">.jspTrack"),$=it.find(">.jspDrag"),I.showArrows&&(at=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",u(0,-1)).bind("click.jsp",P),ct=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",u(0,1)).bind("click.jsp",P),I.arrowScrollOnHover&&(at.bind("mouseover.jsp",u(0,-1,at)),ct.bind("mouseover.jsp",u(0,1,ct))),p(it,I.verticalArrowPositions,at,ct)),st=q,V.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){st-=e(this).outerHeight()}),$.hover(function(){$.addClass("jspHover")},function(){$.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",P),$.addClass("jspActive");var n=t.pageY-$.position().top;return e("html").bind("mousemove.jsp",function(e){g(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",j),!1}),r())}function r(){it.height(st+"px"),Z=0,ot=I.verticalGutter+it.outerWidth(),F.width(G-ot-vt),0===nt.position().left&&F.css("margin-left",ot+"px")}function a(){U&&(V.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),lt=V.find(">.jspHorizontalBar"),pt=lt.find(">.jspTrack"),_=pt.find(">.jspDrag"),I.showArrows&&(ft=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",u(-1,0)).bind("click.jsp",P),ht=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",u(1,0)).bind("click.jsp",P),I.arrowScrollOnHover&&(ft.bind("mouseover.jsp",u(-1,0,ft)),ht.bind("mouseover.jsp",u(1,0,ht))),p(pt,I.horizontalArrowPositions,ft,ht)),_.hover(function(){_.addClass("jspHover")},function(){_.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",P),_.addClass("jspActive");var n=t.pageX-_.position().left;return e("html").bind("mousemove.jsp",function(e){m(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",j),!1}),ut=V.innerWidth(),c())}function c(){V.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ut-=e(this).outerWidth()}),pt.width(ut+"px"),tt=0}function l(){if(U&&Q){var t=pt.outerHeight(),n=it.outerWidth();st-=t,e(lt).find(">.jspCap:visible,>.jspArrow").each(function(){ut+=e(this).outerWidth()}),ut-=n,q-=n,G-=t,pt.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),r(),c()}U&&F.width(V.outerWidth()-vt+"px"),O=F.outerHeight(),K=O/q,U&&(dt=Math.ceil(1/N*ut),dt>I.horizontalDragMaxWidth?dt=I.horizontalDragMaxWidth:dt<I.horizontalDragMinWidth&&(dt=I.horizontalDragMinWidth),_.width(dt+"px"),et=ut-dt,b(tt)),Q&&(rt=Math.ceil(1/K*st),rt>I.verticalDragMaxHeight?rt=I.verticalDragMaxHeight:rt<I.verticalDragMinHeight&&(rt=I.verticalDragMinHeight),$.height(rt+"px"),J=st-rt,v(Z))}function p(e,t,n,i){var o,s="before",r="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==s?r=t:t==r&&(s=t,o=n,n=i,i=o),e[s](n)[r](i)}function u(e,t,n){return function(){return d(e,t,this,n),this.blur(),!1}}function d(t,n,i,o){i=e(i).addClass("jspActive");var s,r,a=!0,c=function(){0!==t&&bt.scrollByX(t*I.arrowButtonSpeed),0!==n&&bt.scrollByY(n*I.arrowButtonSpeed),r=setTimeout(c,a?I.initialDelay:I.arrowRepeatFreq),a=!1};c(),s=o?"mouseout.jsp":"mouseup.jsp",o=o||e("html"),o.bind(s,function(){i.removeClass("jspActive"),r&&clearTimeout(r),r=null,o.unbind(s)})}function f(){h(),Q&&it.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var i,o=e(this),s=o.offset(),r=t.pageY-s.top-Z,a=!0,c=function(){var e=o.offset(),n=t.pageY-e.top-rt/2,s=q*I.scrollPagePercent,p=J*s/(O-q);if(0>r)Z-p>n?bt.scrollByY(-s):g(n);else{if(!(r>0))return void l();n>Z+p?bt.scrollByY(s):g(n)}i=setTimeout(c,a?I.initialDelay:I.trackClickRepeatFreq),a=!1},l=function(){i&&clearTimeout(i),i=null,e(document).unbind("mouseup.jsp",l)};return c(),e(document).bind("mouseup.jsp",l),!1}}),U&&pt.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var i,o=e(this),s=o.offset(),r=t.pageX-s.left-tt,a=!0,c=function(){var e=o.offset(),n=t.pageX-e.left-dt/2,s=G*I.scrollPagePercent,p=et*s/(E-G);if(0>r)tt-p>n?bt.scrollByX(-s):m(n);else{if(!(r>0))return void l();n>tt+p?bt.scrollByX(s):m(n)}i=setTimeout(c,a?I.initialDelay:I.trackClickRepeatFreq),a=!1},l=function(){i&&clearTimeout(i),i=null,e(document).unbind("mouseup.jsp",l)};return c(),e(document).bind("mouseup.jsp",l),!1}})}function h(){pt&&pt.unbind("mousedown.jsp"),it&&it.unbind("mousedown.jsp")}function j(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),$&&$.removeClass("jspActive"),_&&_.removeClass("jspActive")}function g(e,t){Q&&(0>e?e=0:e>J&&(e=J),t===n&&(t=I.animateScroll),t?bt.animate($,"top",e,v):($.css("top",e),v(e)))}function v(e){e===n&&(e=$.position().top),V.scrollTop(0),Z=e;var i=0===Z,o=Z==J,s=e/J,r=-s*(O-q);(wt!=i||yt!=o)&&(wt=i,yt=o,t.trigger("jsp-arrow-change",[wt,yt,kt,Ct])),w(i,o),F.css("top",r),t.trigger("jsp-scroll-y",[-r,i,o]).trigger("scroll")}function m(e,t){U&&(0>e?e=0:e>et&&(e=et),t===n&&(t=I.animateScroll),t?bt.animate(_,"left",e,b):(_.css("left",e),b(e)))}function b(e){e===n&&(e=_.position().left),V.scrollTop(0),tt=e;var i=0===tt,o=tt==et,s=e/et,r=-s*(E-G);(kt!=i||Ct!=o)&&(kt=i,Ct=o,t.trigger("jsp-arrow-change",[wt,yt,kt,Ct])),k(i,o),F.css("left",r),t.trigger("jsp-scroll-x",[-r,i,o]).trigger("scroll")}function w(e,t){I.showArrows&&(at[e?"addClass":"removeClass"]("jspDisabled"),ct[t?"addClass":"removeClass"]("jspDisabled"))}function k(e,t){I.showArrows&&(ft[e?"addClass":"removeClass"]("jspDisabled"),ht[t?"addClass":"removeClass"]("jspDisabled"))}function y(e,t){var n=e/(O-q);g(n*J,t)}function C(e,t){var n=e/(E-G);m(n*et,t)}function T(t,n,i){var o,s,r,a,c,l,p,u,d=0,f=0;try{o=e(t)}catch(h){return}for(s=o.outerHeight(),r=o.outerWidth(),V.scrollTop(0),V.scrollLeft(0);!o.is(".jspPane");)if(d+=o.position().top,f+=o.position().left,o=o.offsetParent(),/^body|html$/i.test(o[0].nodeName))return;a=D(),c=a+q,a>d||n?p=d-I.verticalGutter:d+s>c&&(p=d-q+s+I.verticalGutter),p&&y(p,i),viewportLeft=B(),l=viewportLeft+G,viewportLeft>f||n?u=f-I.horizontalGutter:f+r>l&&(u=f-G+r+I.horizontalGutter),u&&C(u,i)}function B(){return-F.position().left}function D(){return-F.position().top}function H(){V.unbind(Bt).bind(Bt,function(e,t,n,i){var o=tt,s=Z;return bt.scrollBy(n*I.mouseWheelSpeed,-i*I.mouseWheelSpeed,!1),o==tt&&s==Z})}function S(){V.unbind(Bt)}function P(){return!1}function A(){F.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){T(e.target,!1)})}function x(){F.find(":input,a").unbind("focus.jsp")}function W(){function e(){var e=tt,t=Z;switch(n){case 40:bt.scrollByY(I.keyboardSpeed,!1);break;case 38:bt.scrollByY(-I.keyboardSpeed,!1);break;case 34:case 32:bt.scrollByY(q*I.scrollPagePercent,!1);break;case 33:bt.scrollByY(-q*I.scrollPagePercent,!1);break;case 39:bt.scrollByX(I.keyboardSpeed,!1);break;case 37:bt.scrollByX(-I.keyboardSpeed,!1)}return i=e!=tt||t!=Z}var n,i;F.focus(function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this){var o=tt,s=Z;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=t.keyCode,e();break;case 35:y(O-q),n=null;break;case 36:y(0),n=null}return i=t.keyCode==n&&o!=tt||s!=Z,!i}}).bind("keypress.jsp",function(t){return t.keyCode==n&&e(),!i}),I.hideFocus?(t.css("outline","none"),"hideFocus"in V[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in V[0]&&t.attr("hideFocus",!1))}function Y(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function X(){if(location.hash&&location.hash.length>1){var t,n;try{t=e(location.hash)}catch(i){return}t.length&&F.find(location.hash)&&(0===V.scrollTop()?n=setInterval(function(){V.scrollTop()>0&&(T(location.hash,!0),e(document).scrollTop(V.position().top),clearInterval(n))},50):(T(location.hash,!0),e(document).scrollTop(V.position().top)))}}function M(){e("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function z(){M(),e("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var e,t=this.href.split("#");return t.length>1&&(e=t[1],e.length>0&&F.find("#"+e).length>0)?(T("#"+e,!0),!1):void 0})}function L(){var e,t,n,i,o,s=!1;V.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var a=r.originalEvent.touches[0];e=B(),t=D(),n=a.pageX,i=a.pageY,o=!1,s=!0}).bind("touchmove.jsp",function(r){if(s){var a=r.originalEvent.touches[0],c=tt,l=Z;return bt.scrollTo(e+n-a.pageX,t+i-a.pageY),o=o||Math.abs(n-a.pageX)>5||Math.abs(i-a.pageY)>5,c==tt&&l==Z}}).bind("touchend.jsp",function(){s=!1}).bind("click.jsp-touchclick",function(){return o?(o=!1,!1):void 0})}function R(){var e=D(),n=B();t.removeClass("jspScrollable").unbind(".jsp"),t.replaceWith(Tt.append(F.children())),Tt.scrollTop(e),Tt.scrollLeft(n)}var I,F,G,q,V,E,O,N,K,Q,U,$,J,Z,_,et,tt,nt,it,ot,st,rt,at,ct,lt,pt,ut,dt,ft,ht,jt,gt,vt,mt,bt=this,wt=!0,kt=!0,yt=!1,Ct=!1,Tt=t.clone(!1,!1).empty(),Bt=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";gt=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),vt=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0),e.extend(bt,{reinitialise:function(t){t=e.extend({},I,t),o(t)},scrollToElement:function(e,t,n){T(e,t,n)},scrollTo:function(e,t,n){C(e,n),y(t,n)},scrollToX:function(e,t){C(e,t)},scrollToY:function(e,t){y(e,t)},scrollToPercentX:function(e,t){C(e*(E-G),t)},scrollToPercentY:function(e,t){y(e*(O-q),t)},scrollBy:function(e,t,n){bt.scrollByX(e,n),bt.scrollByY(t,n)},scrollByX:function(e,t){var n=B()+e,i=n/(E-G);m(i*et,t)},scrollByY:function(e,t){var n=D()+e,i=n/(O-q);g(i*J,t)},positionDragX:function(e,t){m(e,t)},positionDragY:function(e,t){m(e,t)},animate:function(e,t,n,i){var o={};o[t]=n,e.animate(o,{duration:I.animateDuration,ease:I.animateEase,queue:!1,step:i})},getContentPositionX:function(){return B()},getContentPositionY:function(){return D()},getContentWidth:function(){return E()},getContentHeight:function(){return O()},getPercentScrolledX:function(){return B()/(E-G)},getPercentScrolledY:function(){return D()/(O-q)},getIsScrollableH:function(){return U},getIsScrollableV:function(){return Q},getContentPane:function(){return F},scrollToBottom:function(e){g(J,e)},hijackInternalLinks:function(){z()},destroy:function(){R()}}),o(i)}t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed});var o;return this.each(function(){var n=e(this),s=n.data("jsp");s?s.reinitialise(t):(s=new i(n,t),n.data("jsp",s)),o=o?o.add(n):n}),o},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this);