<style>
    .demo-container {
        box-sizing: border-box;
        width: 960px;
        height: 450px;
        padding-top: 20px;
        padding-right: 15px;
        padding-left: 15px;
        padding-bottom: 30px;
        margin: 15px auto 30px auto;
        border: 1px solid #ddd;
        background: #fff;
        background: linear-gradient(#f6f6f6 0, #fff 50px);
        background: -o-linear-gradient(#f6f6f6 0, #fff 50px);
        background: -ms-linear-gradient(#f6f6f6 0, #fff 50px);
        background: -moz-linear-gradient(#f6f6f6 0, #fff 50px);
        background: -webkit-linear-gradient(#f6f6f6 0, #fff 50px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
        -o-box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        -ms-box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        -moz-box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        -webkit-box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    }

    .demo-placeholder {
        width: 100%;
        height: 100%;
        font-size: 14px;
        line-height: 1.2em;
    }

    .legend table {
        border-spacing: 5px;
    }
</style>

<div class="demo-container">
  <%= select_tag :channel, options_for_select(@channels.each_with_index.map { |c, i| [c.name, i] }) %>
  <div id="grapher" class="demo-placeholder"></div>
</div>


<script>
    $(function () {
        $('#channel').on('change', function () {
            $.plot("#grapher", [
                        {
                            label: "Campaign Ad Spots",
                            data: gon.channel_spots[parseInt($(this).val())][1],
                            bars: { show: true, fill: true }
                        },
                        {
                            label: "TVR",
                            data: gon.channel_slots[parseInt($(this).val())][1],
                            yaxis: 2
                        }
                    ],
                    {
                        xaxis: {
                            ticks: [
                                0,
                                [ 2, "2AM" ],
                                [ 3, "3AM" ],
                                [ 4, "4AM" ],
                                [ 5, "5AM" ],
                                [ 6, "6AM" ],
                                [ 7, "7AM" ],
                                [ 8, "8AM" ],
                                [ 9, "9AM" ],
                                [ 10, "10AM" ],
                                [ 11, "11AM" ],
                                [ 12, "12PM" ],
                                [ 13, "1PM" ],
                                [ 14, "2PM" ],
                                [ 15, "3PM" ],
                                [ 16, "4PM" ],
                                [ 17, "5PM" ],
                                [ 18, "6PM" ],
                                [ 19, "7PM" ],
                                [ 20, "8PM" ],
                                [ 21, "9PM" ],
                                [ 22, "10PM" ],
                                [ 23, "11PM" ],
                                [ 24, "12AM" ],
                                [ 25, "1AM" ]
                            ]
                        },
                        yaxes: [
                            { },
                            {
                                // align if we are to the right
                                alignTicksWithAxis: 1,
                                position: "right"
                            }
                        ],
                        legend: { position: "nw" }
                    }
            );
        });
    });

</script>